<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>‚ö° WCNegentropy ‚Äî The Architect ‚Ä¢ Code, Repos, Products</title>
  <meta name="description" content="High‚Äëquality ML/AI code, repos, and products from WCNegentropy. Buy licenses, explore open source, and cutting‚Äëedge R&D." />
  <link rel="canonical" href="https://WCNegentropy.github.io/" />
  <meta name="theme-color" content="#0ea5e9" />
  
  <!-- Security Headers -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="DENY" />
  <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="WCNegentropy ‚Äî The Architect ‚Ä¢ Code & Repos" />
  <meta property="og:description" content="High‚Äëquality ML/AI code, repos, and products from WCNegentropy. Buy licenses, explore open source, and cutting‚Äëedge R&D." />
  <meta property="og:image" content="/og-image.png" />
  <meta property="og:url" content="https://WCNegentropy.github.io/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@WCNegentropy" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />

  <!-- Tailwind (buildless) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] },
          colors: {
            brand: {
              50: '#e6f8ff', 100: '#ccefff', 200: '#99dfff', 300: '#66cfff', 400: '#33bfff',
              500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1', 800: '#075985', 900: '#0c4a6e'
            }
          },
          boxShadow: {
            glow: '0 10px 30px rgba(14,165,233,0.25)'
          }
        }
      }
    }
  </script>

  <style>
    :root { color-scheme: light dark; }
    body { font-family: Inter, ui-sans-serif, system-ui; }
    /* Subtle animated gradient background */
    .bg-grid {
      background-image: radial-gradient( circle at 1px 1px, rgba(0,0,0,.05) 1px, transparent 0 );
      background-size: 22px 22px;
    }
    .blob {
      position: absolute; filter: blur(70px); opacity: .3; pointer-events:none;
      background: conic-gradient(from 90deg at 50% 50%, #60a5fa, #a78bfa, #22d3ee, #60a5fa);
      animation: spin 18s linear infinite;
    }
    @keyframes spin { to { transform: rotate(1turn); } }
  </style>

  <!-- Plausible (optional). Replace domain; or remove. -->
  <!-- <script defer data-domain="yourusername.github.io" src="https://plausible.io/js/script.js"></script> -->

  <!-- JSON‚ÄëLD will be injected by JS based on settings below -->
</head>
<body class="bg-white text-slate-800 dark:bg-slate-950 dark:text-slate-100">
  <!-- ===== CONFIG (edit these in one place) ===== -->
  <script>
    const SITE = {
      ownerName: "WCNegentropy",
      tagline: "The Architect ‚Ä¢ Software Engineer ‚Ä¢ R&D ‚Ä¢ ML/AI",
      email: "contact@wcnegentropy.com",
      location: "NJ, USA",
      githubUser: "WCNegentropy", // used to fetch repos
      avatar: "https://github.com/WCNegentropy.png", // GitHub profile picture
      social: {
        github: "https://github.com/WCNegentropy",
        x: "https://twitter.com/WCNegentropy",
        huggingface: "https://huggingface.co/WCNegentropy",
        linkedin: "", // temporarily removed
        email: "mailto:contact@wcnegentropy.com"
      },
      // Products & innovations - launching soon!
      products: [
        {
          id: "prod-reversible-transformer",
          name: "Bit-Native Reversible Transformer",
          blurb: "Revolutionary language model using text‚Üîparity bit conversion. Truly reversible neural architecture.",
          price: "TBA",
          license: "Commercial license coming soon.",
          image: "https://images.unsplash.com/photo-1635070041078-e363dbe005cb?q=80&w=1200&auto=format&fit=crop",
          highlights: ["Bit-native processing", "Perfect reversibility", "Novel architecture"],
          checkout: "#contact",
          comingSoon: true
        },
        {
          id: "prod-procedural-engine",
          name: "Deterministic Game Engine",
          blurb: "Fully procedural game engine. World, textures, graphics, physics‚Äîall from one seed.",
          price: "TBA", 
          license: "Commercial license coming soon.",
          image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1200&auto=format&fit=crop",
          highlights: ["Single seed generation", "Complete determinism", "Graphics + Physics + World"],
          checkout: "#contact",
          comingSoon: true
        },
        {
          id: "prod-custom-innovation",
          name: "Custom R&D Projects",
          blurb: "Bespoke cutting-edge solutions. From AI breakthroughs to novel algorithms.",
          price: "Contact",
          license: "Custom licensing available.",
          image: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=1200&auto=format&fit=crop",
          highlights: ["Bleeding-edge tech", "Novel approaches", "Mad science guaranteed"],
          checkout: "#contact",
          comingSoon: false
        }
      ]
    }
  </script>

  <!-- Background blobs -->
  <div class="blob w-[40vw] h-[40vw] top-[-10vw] left-[-10vw] rounded-full"></div>
  <div class="blob w-[30vw] h-[30vw] bottom-[-10vw] right-[-10vw] rounded-full"></div>

  <!-- HEADER / NAV -->
  <header class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/60 border-b border-slate-200/60 dark:border-slate-800">
    <div class="mx-auto max-w-7xl px-6 py-4 flex items-center justify-between">
      <a href="#" class="flex items-center gap-3 group">
        <img id="avatar" class="size-10 rounded-full ring-2 ring-brand-400/40" alt="avatar" />
        <div>
          <div id="owner-name" class="font-semibold tracking-tight group-hover:text-brand-600 transition"></div>
          <div id="owner-tagline" class="text-xs text-slate-500 dark:text-slate-400"></div>
        </div>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#products" class="hover:text-brand-600">R&D</a>
        <a href="#repos" class="hover:text-brand-600">Repos</a>
        <a href="/algorithms.html" class="hover:text-brand-600">Visualizer</a>
        <a href="/playground.html" class="hover:text-brand-600">Playground</a>
        <a href="#about" class="hover:text-brand-600">About</a>
        <a href="#contact" class="hover:text-brand-600">Contact</a>
      </nav>
      <div class="flex items-center gap-2">
        <button id="theme-toggle" class="inline-flex items-center gap-2 rounded-xl border border-slate-200 dark:border-slate-700 px-3 py-1.5 text-xs hover:shadow-glow transition" aria-label="Toggle theme">
          <span class="i-theme">üåû</span><span class="hidden sm:inline">Theme</span>
        </button>
        <a id="cta-top" href="#products" class="rounded-xl bg-brand-600 text-white px-4 py-2 text-sm font-semibold shadow-glow hover:bg-brand-700">View R&D</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 bg-grid pointer-events-none"></div>
    <div class="mx-auto max-w-7xl px-6 pt-16 pb-12 lg:pt-24 lg:pb-16">
      <div class="grid lg:grid-cols-12 gap-10 items-center">
        <div class="lg:col-span-7">
          <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight leading-tight">
            Mad science <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-500 to-violet-500">code factory</span> unleashed.
          </h1>
          <p class="mt-5 text-lg text-slate-600 dark:text-slate-300 max-w-2xl">
            Radical innovations in AI, graphics, and algorithms. From reversible transformers to deterministic game engines‚Äîcutting‚Äëedge R&D that pushes boundaries.
          </p>
          <div class="mt-8 flex flex-wrap gap-3">
            <a href="/algorithms.html" class="rounded-xl bg-brand-600 text-white px-6 py-3 font-semibold shadow-glow hover:bg-brand-700">Try Algorithm Visualizer</a>
            <a href="/playground.html" class="rounded-xl bg-violet-600 text-white px-6 py-3 font-semibold shadow-glow hover:bg-violet-700">Code Playground</a>
            <a href="#products" class="rounded-xl border border-slate-300 dark:border-slate-600 px-6 py-3 font-semibold hover:bg-slate-50 dark:hover:bg-slate-900">View R&D</a>
          </div>
          <!-- Socials -->
          <div class="mt-8 flex items-center gap-4 text-slate-500">
            <a id="link-github" class="hover:text-brand-600" href="#" target="_blank" rel="noopener">GitHub</a>
            <a id="link-x" class="hover:text-brand-600" href="#" target="_blank" rel="noopener">X</a>
            <a id="link-hf" class="hover:text-brand-600" href="#" target="_blank" rel="noopener">Hugging Face</a>
            <!-- LinkedIn link removed temporarily -->
          </div>
        </div>
        <div class="lg:col-span-5">
          <div class="relative p-2 rounded-2xl bg-gradient-to-br from-brand-500/10 via-violet-500/10 to-cyan-500/10 ring-1 ring-slate-200 dark:ring-slate-800">
            <img id="hero-img" alt="preview" class="rounded-xl shadow-2xl" src="https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1600&auto=format&fit=crop" />
          </div>
          <p class="mt-3 text-xs text-slate-500 text-center">Swap this image with a product collage or logo.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- TRUST / NUMBERS (optional) -->
  <section class="mx-auto max-w-7xl px-6 pb-8">
    <div class="grid sm:grid-cols-3 gap-4">
      <div class="rounded-2xl border border-slate-200 dark:border-slate-800 p-5 text-center">
        <div class="text-3xl font-extrabold" id="kpi1">‚àû</div>
        <div class="text-sm text-slate-500">Possibilities unlocked</div>
      </div>
      <div class="rounded-2xl border border-slate-200 dark:border-slate-800 p-5 text-center">
        <div class="text-3xl font-extrabold" id="kpi2">100%</div>
        <div class="text-sm text-slate-500">Deterministic innovation</div>
      </div>
      <div class="rounded-2xl border border-slate-200 dark:border-slate-800 p-5 text-center">
        <div class="text-3xl font-extrabold" id="kpi3">‚ö°</div>
        <div class="text-sm text-slate-500">Mad science factor</div>
      </div>
    </div>
  </section>

  <!-- PRODUCTS -->
  <section id="products" class="mx-auto max-w-7xl px-6 py-16">
    <div class="flex items-end justify-between flex-wrap gap-4">
      <div>
        <h2 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Innovations & R&D</h2>
        <p class="mt-2 text-slate-600 dark:text-slate-300 max-w-2xl">Cutting‚Äëedge breakthroughs in AI, graphics, and algorithms. Revolutionary tech that pushes boundaries.</p>
      </div>
      <a href="#contact" class="text-brand-600 hover:underline">Need a team license? ‚Üí</a>
    </div>

    <div id="products-grid" class="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </section>

  <!-- REPOS (auto‚Äëfetched from GitHub) -->
  <section id="repos" class="mx-auto max-w-7xl px-6 py-16">
    <h2 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Open Source Repos</h2>
    <p class="mt-2 text-slate-600 dark:text-slate-300 max-w-2xl">Latest public repositories from <span id="gh-name" class="font-semibold"></span>. Star those you like!</p>
    <div id="repo-grid" class="mt-8 grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    <div class="mt-6"><a id="gh-see-all" class="inline-block text-brand-600 hover:underline" href="#" target="_blank" rel="noopener">See all on GitHub ‚Üí</a></div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="mx-auto max-w-7xl px-6 py-16">
    <div class="grid lg:grid-cols-3 gap-8 items-start">
      <div class="lg:col-span-2">
        <h2 class="text-3xl sm:text-4xl font-extrabold tracking-tight">About</h2>
        <div class="prose dark:prose-invert max-w-none mt-4">
          <p>I'm <strong id="about-name">The Architect</strong>, a solo developer running a mad science code factory. I build software that pushes the boundaries of what's possible.</p>
          <p>Current focus: Revolutionary AI architectures (bit-native transformers), deterministic procedural systems, and bleeding-edge R&D across ML/AI, and algorithms.</p>
          <p> Everything from revolutionary language models to fully procedural game engines‚Äîall deterministically deviated from the same obsessive pursuit of innovation.</p>
        </div>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#contact" class="rounded-xl bg-brand-600 text-white px-5 py-2.5 font-semibold shadow-glow hover:bg-brand-700">Work with me</a>
          <a id="cv-link" href="#" class="rounded-xl border border-slate-300 dark:border-slate-600 px-5 py-2.5 font-semibold hover:bg-slate-50 dark:hover:bg-slate-900">Download CV</a>
        </div>
      </div>
      <aside class="lg:col-span-1">
        <div class="rounded-2xl border border-slate-200 dark:border-slate-800 p-5">
          <h3 class="font-semibold">Quick Facts</h3>
          <ul class="mt-3 space-y-2 text-sm text-slate-600 dark:text-slate-300">
            <li>üìç <span id="about-location">NJ, USA</span></li>
            <li>‚úâÔ∏è <a id="about-email" class="text-brand-600" href="#">Email me</a></li>
            <!-- LinkedIn profile removed temporarily -->
            <li>üß™ <a class="text-brand-600" id="about-hf" href="#" target="_blank" rel="noopener">Hugging Face profile</a></li>
          </ul>
        </div>
      </aside>
    </div>
  </section>

  <!-- LINKS / LINK-IN-BIO -->
  <section id="links" class="mx-auto max-w-7xl px-6 py-16">
    <h2 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Elsewhere</h2>
    <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <a class="group rounded-2xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-glow transition" id="link-card-github" href="#" target="_blank" rel="noopener">
        <div class="text-lg font-semibold">GitHub</div>
        <div class="text-sm text-slate-500">Open source & snippets</div>
      </a>
      <a class="group rounded-2xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-glow transition" id="link-card-x" href="#" target="_blank" rel="noopener">
        <div class="text-lg font-semibold">X / Twitter</div>
        <div class="text-sm text-slate-500">Notes & releases</div>
      </a>
      <a class="group rounded-2xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-glow transition" id="link-card-hf" href="#" target="_blank" rel="noopener">
        <div class="text-lg font-semibold">Hugging Face</div>
        <div class="text-sm text-slate-500">Models & Spaces</div>
      </a>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="mx-auto max-w-7xl px-6 py-16">
    <div class="max-w-2xl mx-auto">
      <div class="text-center mb-10">
        <h2 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Get In Touch</h2>
        <p class="mt-2 text-slate-600 dark:text-slate-300">Ready to collaborate on cutting-edge innovation? Drop me a line.</p>
      </div>
      <div class="rounded-2xl border border-slate-200 dark:border-slate-800 p-8">
        <form class="space-y-4" action="mailto:contact@wcnegentropy.com" method="post" enctype="text/plain">
          <div class="grid md:grid-cols-2 gap-4">
            <input required name="name" placeholder="Name" class="w-full rounded-xl border border-slate-300 dark:border-slate-600 bg-transparent px-4 py-3" />
            <input required type="email" name="email" placeholder="Email" class="w-full rounded-xl border border-slate-300 dark:border-slate-600 bg-transparent px-4 py-3" />
          </div>
          <input name="subject" placeholder="Subject" class="w-full rounded-xl border border-slate-300 dark:border-slate-600 bg-transparent px-4 py-3" />
          <textarea required name="message" rows="5" placeholder="Tell me about your project, idea, or how we might collaborate..." class="w-full rounded-xl border border-slate-300 dark:border-slate-600 bg-transparent px-4 py-3"></textarea>
          <div class="flex items-center justify-between">
            <p class="text-sm text-slate-500">Or email directly: <a href="mailto:contact@wcnegentropy.com" class="text-brand-600 hover:underline">contact@wcnegentropy.com</a></p>
            <button type="submit" class="rounded-xl bg-brand-600 text-white px-6 py-3 font-semibold shadow-glow hover:bg-brand-700">Send Message</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t border-slate-200 dark:border-slate-800 py-10">
    <div class="mx-auto max-w-7xl px-6 flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-sm text-slate-500">¬© <span id="year"></span> <span id="foot-name">Your Name</span>. All rights reserved.</p>
      <div class="flex items-center gap-4 text-sm text-slate-500">
        <a href="#" class="hover:text-brand-600">Terms</a>
        <a href="#" class="hover:text-brand-600">Privacy</a>
        <a href="#top" class="hover:text-brand-600">Back to top ‚Üë</a>
      </div>
    </div>
  </footer>

  <!-- ===== SCRIPTS ===== -->
  <script>
    // --- Theme ---
    const applyTheme = (t) => {
      const root = document.documentElement;
      if (t === 'dark') root.classList.add('dark'); else root.classList.remove('dark');
      document.querySelector('.i-theme').textContent = t === 'dark' ? 'üåô' : 'üåû';
      localStorage.setItem('theme', t);
    }
    const initTheme = () => {
      const pref = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      applyTheme(pref);
    }
    document.addEventListener('DOMContentLoaded', () => {
      initTheme();
      document.getElementById('theme-toggle').addEventListener('click', () => {
        const t = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
        applyTheme(t);
      });
    });

    // --- Populate owner info ---
    const byId = (id) => document.getElementById(id);
    const setLinks = () => {
      byId('owner-name').textContent = SITE.ownerName;
      byId('owner-tagline').textContent = SITE.tagline;
      byId('avatar').src = SITE.avatar;
      byId('gh-name').textContent = SITE.githubUser;
      byId('gh-see-all').href = SITE.social.github;
      byId('link-github').href = SITE.social.github;
      byId('link-x').href = SITE.social.x;
      byId('link-hf').href = SITE.social.huggingface;
      byId('link-linkedin').href = SITE.social.linkedin;
      byId('link-card-github').href = SITE.social.github;
      byId('link-card-x').href = SITE.social.x;
      byId('link-card-hf').href = SITE.social.huggingface;
      byId('about-email').href = SITE.social.email || `mailto:${SITE.email}`;
      byId('about-location').textContent = SITE.location;
      byId('about-name').textContent = SITE.ownerName;
      byId('about-linkedin').href = SITE.social.linkedin;
      byId('about-hf').href = SITE.social.huggingface;
      byId('year').textContent = new Date().getFullYear();
      byId('foot-name').textContent = SITE.ownerName;
      document.title = `${SITE.ownerName} ‚Äî Code, Repos, Products`;
      document.querySelector('meta[name=description]')?.setAttribute('content', `${SITE.ownerName} builds ML/AI code, repos, and products.`);
    }

    // --- Render products ---
    const fmt = (n) => new Intl.NumberFormat(undefined, { style: 'currency', currency: 'USD'}).format(n);
    const productsGrid = () => {
      const grid = document.getElementById('products-grid');
      grid.innerHTML = '';
      SITE.products.forEach(p => {
        const el = document.createElement('article');
        el.className = 'group rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden hover:shadow-glow transition flex flex-col';
        const priceDisplay = typeof p.price === 'number' ? fmt(p.price) : p.price;
        const buttonText = p.comingSoon ? 'Coming Soon' : (p.price === 'Contact' ? 'Get Quote' : 'Buy');
        const buttonClass = p.comingSoon ? 'rounded-xl border-2 border-brand-600 text-brand-600 px-4 py-2 font-semibold' : 'rounded-xl bg-brand-600 text-white px-4 py-2 font-semibold hover:bg-brand-700';
        // Create elements safely to prevent XSS
        const imageDiv = document.createElement('div');
        imageDiv.className = 'relative';
        
        const img = document.createElement('img');
        img.src = p.image; // Safe since p.image is from trusted SITE config
        img.alt = p.name; // Safe since p.name is from trusted SITE config
        img.className = 'aspect-[16/9] object-cover';
        imageDiv.appendChild(img);
        
        if (p.comingSoon) {
          const badge = document.createElement('div');
          badge.className = 'absolute top-3 right-3 bg-gradient-to-r from-brand-500 to-violet-500 text-white text-xs px-2 py-1 rounded-full font-semibold';
          badge.textContent = 'Coming Soon';
          imageDiv.appendChild(badge);
        }
        
        const contentDiv = document.createElement('div');
        contentDiv.className = 'p-5 flex-1 flex flex-col';
        
        const title = document.createElement('h3');
        title.className = 'text-xl font-bold';
        title.textContent = p.name;
        
        const description = document.createElement('p');
        description.className = 'mt-1 text-sm text-slate-600 dark:text-slate-300';
        description.textContent = p.blurb;
        
        const highlightsList = document.createElement('ul');
        highlightsList.className = 'mt-3 text-sm text-slate-600 dark:text-slate-300 space-y-1';
        p.highlights.forEach(h => {
          const li = document.createElement('li');
          li.textContent = `‚Ä¢ ${h}`;
          highlightsList.appendChild(li);
        });
        
        const bottomDiv = document.createElement('div');
        bottomDiv.className = 'mt-4 flex items-center justify-between';
        
        const priceDiv = document.createElement('div');
        const priceElement = document.createElement('div');
        priceElement.className = 'text-2xl font-extrabold';
        priceElement.textContent = priceDisplay;
        const licenseElement = document.createElement('div');
        licenseElement.className = 'text-xs text-slate-500';
        licenseElement.textContent = p.license;
        priceDiv.appendChild(priceElement);
        priceDiv.appendChild(licenseElement);
        
        const button = document.createElement('a');
        button.href = p.checkout;
        if (!p.checkout.startsWith('#')) {
          button.target = '_blank';
          button.rel = 'noopener';
        }
        button.className = buttonClass;
        button.textContent = buttonText;
        
        bottomDiv.appendChild(priceDiv);
        bottomDiv.appendChild(button);
        
        contentDiv.appendChild(title);
        contentDiv.appendChild(description);
        contentDiv.appendChild(highlightsList);
        contentDiv.appendChild(bottomDiv);
        
        el.appendChild(imageDiv);
        el.appendChild(contentDiv);
        grid.appendChild(el);
      });
    }

    // --- Fetch GH repos (public) ---
    async function fetchRepos(user) {
      try {
        // Input validation
        if (!user || typeof user !== 'string' || !/^[a-zA-Z0-9\-._]+$/.test(user)) {
          console.error('Invalid GitHub username');
          return [];
        }
        
        const res = await fetch(`https://api.github.com/users/${encodeURIComponent(user)}/repos?per_page=100&sort=updated`);
        
        if (!res.ok) {
          console.error('GitHub API request failed:', res.status, res.statusText);
          return [];
        }
        
        const data = await res.json();
        if (!Array.isArray(data)) {
          console.error('Unexpected API response format');
          return [];
        }
        
        // Sort by stargazers desc, then updated
        data.sort((a,b) => (b.stargazers_count - a.stargazers_count) || (new Date(b.updated_at) - new Date(a.updated_at)));
        
        return data.slice(0, 6).map(r => ({
          // Sanitize and validate each field
          name: String(r.name || 'Unknown').substring(0, 100),
          desc: String(r.description || '').substring(0, 200),
          stars: Math.max(0, parseInt(r.stargazers_count) || 0),
          lang: String(r.language || '‚Äî').substring(0, 50),
          html_url: r.html_url && r.html_url.startsWith('https://github.com/') ? r.html_url : '#',
          archived: Boolean(r.archived),
          updated: r.updated_at || new Date().toISOString()
        }));
      } catch (e) {
        console.error('Repo fetch failed:', e.message);
        return [];
      }
    }

    async function renderRepos() {
      const grid = document.getElementById('repo-grid');
      grid.innerHTML = '<div class="text-slate-500">Loading repos‚Ä¶</div>';
      const repos = await fetchRepos(SITE.githubUser);
      grid.innerHTML = '';
      if (!repos.length) { grid.innerHTML = '<div class="text-slate-500">No repos found.</div>'; return; }
      repos.forEach(r => {
        const el = document.createElement('article');
        el.className = 'rounded-2xl border border-slate-200 dark:border-slate-800 p-5 hover:shadow-glow transition';
        // Create repository elements safely
        const headerDiv = document.createElement('div');
        headerDiv.className = 'flex items-start justify-between gap-3';
        
        const repoLink = document.createElement('a');
        repoLink.href = r.html_url; // GitHub API data, but still validate
        repoLink.target = '_blank';
        repoLink.rel = 'noopener';
        repoLink.className = 'text-lg font-semibold hover:text-brand-600';
        repoLink.textContent = r.name; // Safe assignment
        
        const langSpan = document.createElement('span');
        langSpan.className = 'text-xs rounded-full border px-2 py-0.5 border-slate-200 dark:border-slate-700';
        langSpan.textContent = r.lang || '‚Äî'; // Safe assignment with fallback
        
        headerDiv.appendChild(repoLink);
        headerDiv.appendChild(langSpan);
        
        const descP = document.createElement('p');
        descP.className = 'mt-2 text-sm text-slate-600 dark:text-slate-300';
        descP.textContent = r.desc || 'No description available'; // Safe assignment with fallback
        
        const statsDiv = document.createElement('div');
        statsDiv.className = 'mt-3 text-xs text-slate-500';
        statsDiv.textContent = `‚≠ê ${r.stars} ‚Ä¢ Updated ${new Date(r.updated).toLocaleDateString()}`;
        
        el.appendChild(headerDiv);
        el.appendChild(descP);
        el.appendChild(statsDiv);
        grid.appendChild(el);
      });
    }

    // --- JSON‚ÄëLD ---
    const injectJSONLD = () => {
      const org = {
        '@context': 'https://schema.org', '@type': 'Person',
        name: SITE.ownerName, url: location.origin, email: SITE.email,
        sameAs: [SITE.social.github, SITE.social.x, SITE.social.huggingface, SITE.social.linkedin].filter(Boolean)
      };
      const products = SITE.products.map(p => ({
        '@context': 'https://schema.org', '@type': 'Product',
        name: p.name, description: p.blurb,
        image: p.image, url: location.origin + '#'+p.id,
        offers: { '@type': 'Offer', price: p.price, priceCurrency: 'USD', url: p.checkout, availability: 'https://schema.org/InStock' }
      }));
      const scripts = [org, ...products].map(obj => {
        const s = document.createElement('script'); s.type = 'application/ld+json';
        s.textContent = JSON.stringify(obj); return s;
      });
      scripts.forEach(s => document.head.appendChild(s));
    }

    // --- On load ---
    document.addEventListener('DOMContentLoaded', async () => {
      setLinks();
      productsGrid();
      renderRepos();
      injectJSONLD();
    });
  </script>
</body>
</html>
